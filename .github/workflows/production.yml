name: 'ğŸ‘¨â€ğŸš€ Ready for Production Deployment ğŸš€'

on:
  pull_request:
    branches:
      - main
    types: [closed]

jobs:
  deployment:
    if: ${{ github.event.pull_request.merged }}
    runs-on: ubuntu-latest

    steps:
      - name: 'ğŸ” Check for Code Quality'
        uses: .github/workflows/codeql.yml@main

      - name: 'ğŸ“¦ Build the production files'
        uses: .github/workflows/build.yml@main

      - name: 'ğŸ§ª Cypress End to End Testing'
        uses: .github/workflows/cypress.yml@main

      - name: 'ğŸš€ Deployment of Storybook ğŸŒŒ'
        uses: .github/workflows/storybook.yml@main

      - name: 'ğŸ“¢ Publish for Chromatic'
        uses: .github/workflows/chromatic.yml@main
