name: 'ğŸ“¦ Build the production files'

on:
  workflow_call:

jobs:
  build:
    name: 'â›‘ï¸ Build The Web Application'
    runs-on: ubuntu-latest

    steps:
      - name: 'â˜ï¸ Checkout Repository'
        uses: actions/checkout@v2

      - name: 'ğŸ”§ Setup Node.js'
        uses: actions/setup-node@v3
        with:
          node-version: 16.15.1

      - name: 'ğŸ”§ Install Yarn Globally'
        run: npm i -g yarn@latest

      - name: 'ğŸ“¦ Install Dependencies'
        run: yarn install --frozen-lockfile

      - name: 'â›‘ï¸ Build the Web Application'
        run: |
          export SENTRY_AUTH_TOKEN=${{ secrets.SENTRY_AUTH_TOKEN }} && yarn build

      - name: 'â™»ï¸ Upload Artifacts'
        uses: actions/upload-artifact@v3
        with:
          name: build
          path: .next
